## trpg-java-dice

**简介：**

该项目主要负责TRPG中的骰子逻辑处理。

该模块主要分为 指令识别 、 数值运算。

通过在框架上设计的时候，应当从不依赖其他项目的基础上去实现。从而极大的降低耦合度

指令的识别通过的是注解反射的形式执行。

该项目为 [mirai-rulateday-dice](https://github.com/Eiriksgata/mirai-rulateday-dice) 的依赖项目。

该骰子的开发设定主要是目前两大跑团体系：DND 、 COC
目前作者开发的定义版本为 DND5e 、 COC7版

**开发模块划分**

* 指令识别
* 骰子运算核心
* 自定义文本回复


## **开发代码简介：**

## 指令识别

用户可以通过指令来使骰子程序生成不同的数值。
除此之外还可以更改骰子的默认属性或者是操作菜单等。
目前是做了一个大概的开发代码的思路模板。


**注解：**

* `@InstructService` 注解为标记指令模块类，用于反射架构扫描。
* `@InstructRelflex` 主要标记为指令识别类，当消息传递过来后，将会运行有该指令标记的方法。使用请参考代码中的例子。

**反射实现处理类**

`InstructHandle` 利用reflections反射框架来实现的检测。

指令模块通过注解反射的形式，减少了代码实现的耦合度。
开发人员可以通过在集成的项目中使用注解，从而进行更多的额外操作。

这里只是提供了指令的反射处理，并没有做指令的具体实现。
具体实现请参考 `mirai-rulateday-dice` 的实现。

特殊的指令如果需要后续的修改项，应当考虑使用回调的形式进行。


## 骰子运算

骰子运算的基础雷包含在 `RollBasicsImpl` 

因为跑团中基本使用到属性检测的，基本只有coc 而目前大部分的版本为 coc7版
在7版中，大部分以100面骰子。
本项目中也提供了大量的骰子默认配置项，用于更改。

在该模块中包含了 骰子数字生成、属性检测、理智检测等



## 自定义文本回复

骰子计算后生成的文本会通过该静态方法处理后返回文本。




